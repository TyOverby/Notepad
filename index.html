<html>
    <head>
        <title> Notepad - Ty Overby</title>
        <link rel="shortcut icon" type="image/x-icon" href="./favicon.ico">
        <link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono' rel='stylesheet' type='text/css'>

        <style>
            body {
                margin: 0px;
                padding: 10px;
            }

            textarea {
                margin: 0px;
                padding: 0px;

                width: 100%;
                height: 100%;

                color: rgb(30,30,30);

                font-family: 'Ubuntu Mono', monospace;
                font-size: 18px;

                border: none;

                outline:0px none transparent;
                resize: none;
            }
        </style>

    </head>
    <body>
        <textarea id="ta" spellcheck="false"> * write something here * </textarea>

        <script>
            // We use this a lot...
            var textarea = document.getElementById("ta");
            // Put the cursor in the textarea by default
            textarea.focus();


            // Check to see if we have localstorage capabilities
            if(window.localStorage){
                // Load the text from storage if it exists
                textarea.value = localStorage["text"] || " Write something here.  It will wait for you if you come back. ";


                // A function that saves the text to local storage
                var save = function() {
                    localStorage["text"] = textarea.value;
                }

                // Every ten seconds, we save the textarea text
                // into localStorage.
                setInterval(save, 10*1000);

                // If we detect that the page is closing
                // save everything.
                window.onbeforeunload = save;


                // Var keeping track of the Ctrl-key state.
                var isCtrlDown = false;
                // When a key is released
                document.onkeyup = function(e){
                    // If that key is Ctrl, set the state to false
                    if(e.keyCode == 17){
                        isCtrlDown = false;
                    }
                }

                // When a key is pressed down
                document.onkeydown = function(e){
                    // If it is Ctrl
                    if(e.keyCode == 17) isCtrlDown = true;
                    // If it is the 'S' key and control is pressed
                    if(e.keyCode == 83 && isCtrlDown){
                        // Save to localStorage
                        save();

                        // Return false to keep the browser from trying
                        // to save the webpage
                        return false;
                    }
                }

            }
            else{
                textarea.value = "For this to work, you need a browser with Local Storage.  Please come back with Chrome or Firefox.";
            }
        </script>
    </body>
</html>
